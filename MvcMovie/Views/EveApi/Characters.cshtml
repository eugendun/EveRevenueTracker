@model IEnumerable<MvcMovie.Models.Character>

@{
    ViewBag.Title = "Characters";
}

@section Scripts{
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script type="text/javascript">
        var selwid = null;
        $("#selectable").selectable({
            selected: function (event, ui) {
                $(ui.selected).siblings().removeClass("ui-selected");
                var charId = $(ui.selected).children()[0].value;
                $.ajax({
                    url: "/EveApi/CacheCharacterId",
                    data: "characterid=" + charId,
                    context: $("#CharacterDetails"),
                    success: function (data) {
                        if ($(this).children().length > 0) {
                            $(this).children().remove();
                        }
                        $(this).append(data);
                    }
                });
            }
        });
    </script>
}

@Styles.Render("~/Content/CharactersWebGrid.css", "http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css")

<h2>Characters</h2>

<ol id="selectable">
    @foreach (var m in Model)
    {
        <li class="ui-widget-content">
            @Html.Hidden("charid", m.characterID)
            @m.characterName
        </li>
    }
</ol>

<div id="CharacterDetails">
</div>

@Html.ActionLink("Update", "UpdateCharacters")